<%- model_class = Restaurant -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @restaurant.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %>:</strong></dt>
  <dd><%= @restaurant.description %></dd>
  <dt><strong><%= model_class.human_attribute_name(:address) %>:</strong></dt>
  <dd><%= @restaurant.address %></dd>
  <dt><strong><%= model_class.human_attribute_name(:phone_number) %>:</strong></dt>
  <dd><%= @restaurant.phone_number %></dd>
  <dt><strong><%= model_class.human_attribute_name(:image) %>:</strong></dt>
  <dd><%= image_tag @restaurant.image_url(:masthead) %></dd>
</dl>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              restaurants_path, :class => 'btn'  %>
  <% if owner_signed_in? %>
  <% if @restaurant.owner_id == current_owner.id %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_restaurant_path(@restaurant), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              restaurant_path(@restaurant),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
  <% end %>
  <% end %>
</div>
<!-- ---------------------------- -->
<% if !owner_signed_in? %>
<h2> Make a reservation</h2>
  <%= form_for([@restaurant, @restaurant.reservations.build]) do |f| %>
  <p>
    <%= f.label :email %><br />
    <%= f.email_field :email %>
  </p>
  <p>
    <%= f.label :date %><br>
    <%= f.date_select :date %>
 </p>
 <p>
    <%= f.label :time %><br>
    <%= f.time_select :time, {ampm: true} %>
 </p>
 <p>
    <%= f.label :message %><br>
    <%= f.text_area :message %>
 </p>
 <p>
    <%= f.hidden_field :restaurant_id, value: params[:id] %>
  </p>
  <p>
    <%= f.submit %>
  </p>
<% end %>
<% end %>

<!-- ---------------------------- -->

 <% if owner_signed_in? %>
  <% if @restaurant.owner_id == current_owner.id %>
    <table>
  <tr>
    <th>Date</th>
    <th>Time</th>
    <th>Email</th>
    <th>Message</th>
    <th>Destroy</th>
  </tr>
 
  <% @restaurant.reservations.each do |post| %>
    <tr>
      <td><%= post.date %></td>
      <td><%= post.time %></td>
      <td><%= post.email %></td>
      <td><%= post.message %></td>
      <td><%= link_to 'Destroy Reservation', [@restaurant, post], :method => 'delete',
      data: {confirm: "Are you sure?"} %> </td>
    </tr>
  <% end %>
</table>

    <% end %>
  <% end %>