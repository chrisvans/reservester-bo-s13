
<div class="page-header">
  <h1>Restaurant</h1>
</div>

<div class="container">
    <h3>Another awesome Restaurant by <%= current_restaurant.owner.name %></h3>
    <div class="row">
        <div class="span6">
            <dl class="dl-horizontal">
              <dt><strong>Name:</strong></dt>
              <dd><%= current_restaurant.name %></dd>
              <dt><strong>Description:</strong></dt>
              <dd><%= current_restaurant.description %></dd>
              <dt><strong>Picture:</strong></dt>
              <dd><%= image_tag(current_restaurant.image_url(:masthead).to_s) %></dd>  
              <dt><strong>Address:</strong></dt>
              <dd><%= current_restaurant.streetnumber %> <%= current_restaurant.street %>, <%= current_restaurant.zipcode %> <%= current_restaurant.city %>, <%= current_restaurant.state %> </dd>
              <dt><strong>Phonenumber:</strong></dt>
              <dd><%= current_restaurant.phonenumber %></dd>
            </dl>

            <div class="form-actions">
              <%= link_to 'Back', root_path, :class => 'btn'  %>
              <% if current_owner == current_restaurant.owner %>
                <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          {:action => 'edit', :id => current_restaurant.id}, :class => 'btn' %>
                <%= link_to 'Delete', restaurant_path, :method => 'delete' ,:confirm => 'Are you sure?', :class => 'btn btn-danger' %>
              <% end %>
            </div>
        </div>
        <div class="span6">
        <% if current_owner == current_restaurant.owner %>
            <div class="well">
                <h3>Your Upcoming Reservations for <%= current_restaurant.name %></h3>
                    <table class="table table-hover table-condensed">
                    <%= bootstrap_flash %>
                    <% if current_restaurant.reservations.blank? %>
                          <h3 class="alert alert-info">You have no scheduled reservations!<h3>
                    <% else %>    
                    <thead>
                        <tr>
                        <strong>
                          <th>Name</th>
                          <th>Email</th>
                          <th>Guests</th>                           
                          <th>Reservation Time</th> 
                          <th>Message</th>           
                          <th><%=t '.actions', :default => t("helpers.actions") %></th>
                        </strong>
                        </tr>
                    </thead>
                    <tbody>            
                        <% current_restaurant.reservations.each do |reservation| %> 
                        <tr>
                            <td><%= reservation.guestname %></td>
                            <td><%= reservation.guestemail %></td>
                            <td><%= reservation.guestnumber %></td>
                            <td><%= reservation.reserve_on %></td>       
                            <td><%= reservation.message %></td>
                            <td><%= link_to('Delete', reservation_path(reservation), :method => :delete, :confirm => "Press OK to confirm and delete this reservation?", :class => 'btn btn-danger') %>
                            </td>
                        </tr>
                        <% end %>
                        <% end %> 
                    </tbody>
                    </table>
            </div>
        <% else %>
            <h3>Make a Reservation</h3>
                <%= bootstrap_flash %>
               <%= render :partial => '/reservations/reservation_form' %>
        <% end %>

        </div>
    </div>
</div>
